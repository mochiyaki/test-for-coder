<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bubble Sort Demo</title>
<style>
  body {font-family: Arial, sans-serif; display:flex; flex-direction:column; align-items:center;}
  #arrayContainer {display:flex; align-items:flex-end; margin:20px; width:90%; height:300px; border:1px solid #333;}
  .bar {background-color:#4CAF50; margin:0 1px; width:20px; color:#fff; text-align:center; font-size:10px;}
  .bar.active {background-color:#FF9800;}
  .bar.compared {background-color:#2196F3;}
  button {margin:5px; padding:5px 10px;}
</style>
</head>
<body>
<h1>Bubble Sort Demo</h1>
<div id="arrayContainer"></div>
<div>
<button id="shuffleBtn">Shuffle</button>
<button id="sortBtn">Sort</button>
</div>
<script>
const container = document.getElementById('arrayContainer');
let array = [];
const delay = ms => new Promise(res => setTimeout(res, ms));

function createArray(n=15) {
  array = [];
  for (let i=0;i<n;i++) {
    array.push(Math.floor(Math.random()*200)+20);
  }
  render();
}

function render(activeIdx=null, compareIdx=null) {
  container.innerHTML='';
  array.forEach((val, idx)=>{
    const bar = document.createElement('div');
    bar.className='bar';
    bar.style.height=`${val}px`;
    if(idx===activeIdx) bar.classList.add('active');
    if(idx===compareIdx) bar.classList.add('compared');
    bar.textContent=val;
    container.appendChild(bar);
  });
}

async function bubbleSort() {
  const n = array.length;
  for(let i=0; i<n-1; i++) {
    for(let j=0; j<n-i-1; j++) {
      render(j, j+1);
      await delay(200);
      if(array[j]>array[j+1]) {
        [array[j], array[j+1]] = [array[j+1], array[j]];
        render(j);
        await delay(200);
      }
    }
  }
  render();
}

document.getElementById('shuffleBtn').addEventListener('click', () => {createArray();});
document.getElementById('sortBtn').addEventListener('click', () => {bubbleSort();});
createArray();
</script>
</body>
</html>